<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Deployment Test - Lowry Mastermind</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background: #0b0b0b;
      color: #B3B3B3;
    }
    .test-item {
      background: #262524;
      border: 1px solid #31302F;
      border-radius: 8px;
      padding: 15px;
      margin: 10px 0;
    }
    .success { border-color: #7bbf44; }
    .error { border-color: #d0021b; }
    .warning { border-color: #ffa94d; }
    pre {
      background: #1f1f1f;
      padding: 10px;
      border-radius: 4px;
      overflow-x: auto;
    }
  </style>
  <script>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init Re Ms Fs Pe Rs Cs capture Ve calculateEventProperties Ds register register_once register_for_session unregister unregister_for_session zs getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty Ls As createPersonProfile Ns Is Us opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing is_capturing clear_opt_in_out_capturing Os debug I js getPageViewId captureTraceFeedback captureTraceMetric".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
    posthog.init('phc_UOdKm95N8QaKxaZvW1WBPdb3AqIHOTFBgf696oExyDa', {
        api_host: 'https://us.i.posthog.com',
        defaults: '2025-05-24',
        person_profiles: 'identified_only', // or 'always' to create profiles for anonymous users as well
    })
  </script>
</head>
<body>
  <h1>Deployment Test</h1>
  <p>This page helps verify that your Netlify deployment is working correctly.</p>
  
  <div class="test-item">
    <h3>Basic Page Load</h3>
    <p>✅ Page loaded successfully</p>
  </div>
  
  <div class="test-item">
    <h3>File Structure Test</h3>
    <div id="fileTest">Testing file access...</div>
  </div>
  
  <div class="test-item">
    <h3>CSS Loading Test</h3>
    <div id="cssTest">Testing CSS...</div>
  </div>
  
  <div class="test-item">
    <h3>JavaScript Test</h3>
    <div id="jsTest">Testing JavaScript...</div>
  </div>
  
  <div class="test-item">
    <h3>Firebase Connection Test</h3>
    <div id="firebaseTest">Testing Firebase...</div>
  </div>
  
  <div class="test-item">
    <h3>Environment Info</h3>
    <div id="envInfo">Loading environment info...</div>
  </div>

  <script type="module">
    // Test file structure
    async function testFileStructure() {
      const fileTest = document.getElementById('fileTest');
      try {
        const response = await fetch('styles.css');
        if (response.ok) {
          fileTest.innerHTML = '✅ CSS file accessible';
          fileTest.parentElement.classList.add('success');
        } else {
          fileTest.innerHTML = '❌ CSS file not accessible';
          fileTest.parentElement.classList.add('error');
        }
      } catch (e) {
        fileTest.innerHTML = '❌ File access error: ' + e.message;
        fileTest.parentElement.classList.add('error');
      }
    }
    
    // Test CSS loading
    function testCSS() {
      const cssTest = document.getElementById('cssTest');
      try {
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = 'styles.css?v=3';
        link.onload = () => {
          cssTest.innerHTML = '✅ CSS loaded successfully';
          cssTest.parentElement.classList.add('success');
        };
        link.onerror = () => {
          cssTest.innerHTML = '❌ CSS failed to load';
          cssTest.parentElement.classList.add('error');
        };
        document.head.appendChild(link);
      } catch (e) {
        cssTest.innerHTML = '❌ CSS test error: ' + e.message;
        cssTest.parentElement.classList.add('error');
      }
    }
    
    // Test JavaScript
    function testJavaScript() {
      const jsTest = document.getElementById('jsTest');
      try {
        // Test basic JavaScript functionality
        const testObj = { test: 'value' };
        const testArr = [1, 2, 3];
        const testStr = 'Hello World';
        
        if (JSON.stringify(testObj) === '{"test":"value"}' &&
            testArr.length === 3 &&
            testStr.includes('Hello')) {
          jsTest.innerHTML = '✅ JavaScript working correctly';
          jsTest.parentElement.classList.add('success');
        } else {
          jsTest.innerHTML = '❌ JavaScript basic functions failed';
          jsTest.parentElement.classList.add('error');
        }
      } catch (e) {
        jsTest.innerHTML = '❌ JavaScript error: ' + e.message;
        jsTest.parentElement.classList.add('error');
      }
    }
    
    // Test Firebase
    async function testFirebase() {
      const firebaseTest = document.getElementById('firebaseTest');
      try {
        const { db } = await import('./firebase-config.js');
        firebaseTest.innerHTML = '✅ Firebase configuration loaded';
        firebaseTest.parentElement.classList.add('success');
      } catch (e) {
        firebaseTest.innerHTML = '❌ Firebase error: ' + e.message;
        firebaseTest.parentElement.classList.add('error');
      }
    }
    
    // Environment info
    function showEnvInfo() {
      const envInfo = document.getElementById('envInfo');
      const info = {
        userAgent: navigator.userAgent,
        language: navigator.language,
        onLine: navigator.onLine,
        cookieEnabled: navigator.cookieEnabled,
        timestamp: new Date().toISOString(),
        url: window.location.href,
        protocol: window.location.protocol
      };
      
      envInfo.innerHTML = '<pre>' + JSON.stringify(info, null, 2) + '</pre>';
      envInfo.parentElement.classList.add('success');
    }
    
    // Run all tests
    testFileStructure();
    testCSS();
    testJavaScript();
    testFirebase();
    showEnvInfo();
  </script>
</body>
</html>
